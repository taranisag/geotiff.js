parcelRequire=function(e,r,t,n){var i,o="function"==typeof parcelRequire&&parcelRequire,u="function"==typeof require&&require;function f(t,n){if(!r[t]){if(!e[t]){var i="function"==typeof parcelRequire&&parcelRequire;if(!n&&i)return i(t,!0);if(o)return o(t,!0);if(u&&"string"==typeof t)return u(t);var c=new Error("Cannot find module '"+t+"'");throw c.code="MODULE_NOT_FOUND",c}p.resolve=function(r){return e[t][1][r]||r},p.cache={};var l=r[t]=new f.Module(t);e[t][0].call(l.exports,p,l,l.exports,this)}return r[t].exports;function p(e){return f(p.resolve(e))}}f.isParcelRequire=!0,f.Module=function(e){this.id=e,this.bundle=f,this.exports={}},f.modules=e,f.cache=r,f.parent=o,f.register=function(r,t){e[r]=[function(e,r){r.exports=t},{}]};for(var c=0;c<t.length;c++)try{f(t[c])}catch(e){i||(i=e)}if(t.length){var l=f(t[t.length-1]);"object"==typeof exports&&"undefined"!=typeof module?module.exports=l:"function"==typeof define&&define.amd?define(function(){return l}):n&&(this[n]=l)}if(parcelRequire=f,i)throw i;return f}({"QVnC":[function(require,module,exports) {
var t=function(t){"use strict";var r,e=Object.prototype,n=e.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(t,r,e,n){var o=r&&r.prototype instanceof v?r:v,i=Object.create(o.prototype),a=new k(n||[]);return i._invoke=function(t,r,e){var n=f;return function(o,i){if(n===l)throw new Error("Generator is already running");if(n===p){if("throw"===o)throw i;return N()}for(e.method=o,e.arg=i;;){var a=e.delegate;if(a){var c=_(a,e);if(c){if(c===y)continue;return c}}if("next"===e.method)e.sent=e._sent=e.arg;else if("throw"===e.method){if(n===f)throw n=p,e.arg;e.dispatchException(e.arg)}else"return"===e.method&&e.abrupt("return",e.arg);n=l;var u=h(t,r,e);if("normal"===u.type){if(n=e.done?p:s,u.arg===y)continue;return{value:u.arg,done:e.done}}"throw"===u.type&&(n=p,e.method="throw",e.arg=u.arg)}}}(t,e,a),i}function h(t,r,e){try{return{type:"normal",arg:t.call(r,e)}}catch(n){return{type:"throw",arg:n}}}t.wrap=u;var f="suspendedStart",s="suspendedYield",l="executing",p="completed",y={};function v(){}function d(){}function g(){}var m={};m[i]=function(){return this};var w=Object.getPrototypeOf,L=w&&w(w(G([])));L&&L!==e&&n.call(L,i)&&(m=L);var x=g.prototype=v.prototype=Object.create(m);function E(t){["next","throw","return"].forEach(function(r){t[r]=function(t){return this._invoke(r,t)}})}function b(t,r){var e;this._invoke=function(o,i){function a(){return new r(function(e,a){!function e(o,i,a,c){var u=h(t[o],t,i);if("throw"!==u.type){var f=u.arg,s=f.value;return s&&"object"==typeof s&&n.call(s,"__await")?r.resolve(s.__await).then(function(t){e("next",t,a,c)},function(t){e("throw",t,a,c)}):r.resolve(s).then(function(t){f.value=t,a(f)},function(t){return e("throw",t,a,c)})}c(u.arg)}(o,i,e,a)})}return e=e?e.then(a,a):a()}}function _(t,e){var n=t.iterator[e.method];if(n===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=r,_(t,e),"throw"===e.method))return y;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return y}var o=h(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,y;var i=o.arg;return i?i.done?(e[t.resultName]=i.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=r),e.delegate=null,y):i:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,y)}function j(t){var r={tryLoc:t[0]};1 in t&&(r.catchLoc=t[1]),2 in t&&(r.finallyLoc=t[2],r.afterLoc=t[3]),this.tryEntries.push(r)}function O(t){var r=t.completion||{};r.type="normal",delete r.arg,t.completion=r}function k(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(j,this),this.reset(!0)}function G(t){if(t){var e=t[i];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,a=function e(){for(;++o<t.length;)if(n.call(t,o))return e.value=t[o],e.done=!1,e;return e.value=r,e.done=!0,e};return a.next=a}}return{next:N}}function N(){return{value:r,done:!0}}return d.prototype=x.constructor=g,g.constructor=d,g[c]=d.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var r="function"==typeof t&&t.constructor;return!!r&&(r===d||"GeneratorFunction"===(r.displayName||r.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,g):(t.__proto__=g,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(x),t},t.awrap=function(t){return{__await:t}},E(b.prototype),b.prototype[a]=function(){return this},t.AsyncIterator=b,t.async=function(r,e,n,o,i){void 0===i&&(i=Promise);var a=new b(u(r,e,n,o),i);return t.isGeneratorFunction(e)?a:a.next().then(function(t){return t.done?t.value:a.next()})},E(x),x[c]="Generator",x[i]=function(){return this},x.toString=function(){return"[object Generator]"},t.keys=function(t){var r=[];for(var e in t)r.push(e);return r.reverse(),function e(){for(;r.length;){var n=r.pop();if(n in t)return e.value=n,e.done=!1,e}return e.done=!0,e}},t.values=G,k.prototype={constructor:k,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=r,this.done=!1,this.delegate=null,this.method="next",this.arg=r,this.tryEntries.forEach(O),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=r)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function o(n,o){return c.type="throw",c.arg=t,e.next=n,o&&(e.method="next",e.arg=r),!!o}for(var i=this.tryEntries.length-1;i>=0;--i){var a=this.tryEntries[i],c=a.completion;if("root"===a.tryLoc)return o("end");if(a.tryLoc<=this.prev){var u=n.call(a,"catchLoc"),h=n.call(a,"finallyLoc");if(u&&h){if(this.prev<a.catchLoc)return o(a.catchLoc,!0);if(this.prev<a.finallyLoc)return o(a.finallyLoc)}else if(u){if(this.prev<a.catchLoc)return o(a.catchLoc,!0)}else{if(!h)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return o(a.finallyLoc)}}}},abrupt:function(t,r){for(var e=this.tryEntries.length-1;e>=0;--e){var o=this.tryEntries[e];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=r&&r<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=t,a.arg=r,i?(this.method="next",this.next=i.finallyLoc,y):this.complete(a)},complete:function(t,r){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&r&&(this.next=r),y},finish:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),O(e),y}},catch:function(t){for(var r=this.tryEntries.length-1;r>=0;--r){var e=this.tryEntries[r];if(e.tryLoc===t){var n=e.completion;if("throw"===n.type){var o=n.arg;O(e)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:G(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=r),y}},t}("object"==typeof module?module.exports:{});try{regeneratorRuntime=t}catch(r){Function("r","regeneratorRuntime = r")(t)}
},{}],"PMvg":[function(require,module,exports) {
module.exports=require("regenerator-runtime");
},{"regenerator-runtime":"QVnC"}],"IxO8":[function(require,module,exports) {
function e(e,r,n){return r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n,e}module.exports=e;
},{}],"OUZ9":[function(require,module,exports) {
function r(r){if(Array.isArray(r))return r}module.exports=r;
},{}],"vKPt":[function(require,module,exports) {
function r(r,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(r)){var e=[],n=!0,o=!1,l=void 0;try{for(var i,u=r[Symbol.iterator]();!(n=(i=u.next()).done)&&(e.push(i.value),!t||e.length!==t);n=!0);}catch(a){o=!0,l=a}finally{try{n||null==u.return||u.return()}finally{if(o)throw l}}return e}}module.exports=r;
},{}],"NVR6":[function(require,module,exports) {
function n(n,r){(null==r||r>n.length)&&(r=n.length);for(var e=0,l=new Array(r);e<r;e++)l[e]=n[e];return l}module.exports=n;
},{}],"UyFj":[function(require,module,exports) {
var r=require("./arrayLikeToArray");function t(t,e){if(t){if("string"==typeof t)return r(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?r(t,e):void 0}}module.exports=t;
},{"./arrayLikeToArray":"NVR6"}],"Rom6":[function(require,module,exports) {
function e(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}module.exports=e;
},{}],"HETk":[function(require,module,exports) {
var r=require("./arrayWithHoles"),e=require("./iterableToArrayLimit"),t=require("./unsupportedIterableToArray"),i=require("./nonIterableRest");function u(u,a){return r(u)||e(u,a)||t(u,a)||i()}module.exports=u;
},{"./arrayWithHoles":"OUZ9","./iterableToArrayLimit":"vKPt","./unsupportedIterableToArray":"UyFj","./nonIterableRest":"Rom6"}],"agGE":[function(require,module,exports) {
function n(n,t,o,r,e,i,u){try{var c=n[i](u),v=c.value}catch(a){return void o(a)}c.done?t(v):Promise.resolve(v).then(r,e)}function t(t){return function(){var o=this,r=arguments;return new Promise(function(e,i){var u=t.apply(o,r);function c(t){n(u,e,i,c,v,"next",t)}function v(t){n(u,e,i,c,v,"throw",t)}c(void 0)})}}module.exports=t;
},{}],"P8NW":[function(require,module,exports) {
function e(e,r){for(var n=0;n<r.length;n++){var t=r[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}function r(r,n,t){return n&&e(r.prototype,n),t&&e(r,t),r}module.exports=r;
},{}],"AkAO":[function(require,module,exports) {
function t(o,e){return module.exports=t=Object.setPrototypeOf||function(t,o){return t.__proto__=o,t},t(o,e)}module.exports=t;
},{}],"d4H2":[function(require,module,exports) {
var e=require("./setPrototypeOf");function r(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),t&&e(r,t)}module.exports=r;
},{"./setPrototypeOf":"AkAO"}],"b9XL":[function(require,module,exports) {
function o(t){return"function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?module.exports=o=function(o){return typeof o}:module.exports=o=function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o},o(t)}module.exports=o;
},{}],"E7HD":[function(require,module,exports) {
function e(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}module.exports=e;
},{}],"pxk2":[function(require,module,exports) {
var e=require("../helpers/typeof"),r=require("./assertThisInitialized");function t(t,i){return!i||"object"!==e(i)&&"function"!=typeof i?r(t):i}module.exports=t;
},{"../helpers/typeof":"b9XL","./assertThisInitialized":"E7HD"}],"UJE0":[function(require,module,exports) {
function t(e){return module.exports=t=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},t(e)}module.exports=t;
},{}],"vNP7":[function(require,module,exports) {
function n(n){return-1!==Function.toString.call(n).indexOf("[native code]")}module.exports=n;
},{}],"QFb6":[function(require,module,exports) {
function t(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(t){return!1}}module.exports=t;
},{}],"dJhE":[function(require,module,exports) {
var e=require("./setPrototypeOf"),t=require("./isNativeReflectConstruct");function r(o,u,n){return t()?module.exports=r=Reflect.construct:module.exports=r=function(t,r,o){var u=[null];u.push.apply(u,r);var n=new(Function.bind.apply(t,u));return o&&e(n,o.prototype),n},r.apply(null,arguments)}module.exports=r;
},{"./setPrototypeOf":"AkAO","./isNativeReflectConstruct":"QFb6"}],"ozpi":[function(require,module,exports) {
var e=require("./getPrototypeOf"),r=require("./setPrototypeOf"),t=require("./isNativeFunction"),o=require("./construct");function n(u){var i="function"==typeof Map?new Map:void 0;return module.exports=n=function(n){if(null===n||!t(n))return n;if("function"!=typeof n)throw new TypeError("Super expression must either be null or a function");if(void 0!==i){if(i.has(n))return i.get(n);i.set(n,u)}function u(){return o(n,arguments,e(this).constructor)}return u.prototype=Object.create(n.prototype,{constructor:{value:u,enumerable:!1,writable:!0,configurable:!0}}),r(u,n)},n(u)}module.exports=n;
},{"./getPrototypeOf":"UJE0","./setPrototypeOf":"AkAO","./isNativeFunction":"vNP7","./construct":"dJhE"}],"fcMS":[function(require,module,exports) {
function n(n,o){if(!(n instanceof o))throw new TypeError("Cannot call a class as a function")}module.exports=n;
},{}],"j27V":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.geoKeys=exports.geoKeyNames=exports.ExtraSamplesValues=exports.photometricInterpretations=exports.fieldTypes=exports.fieldTypeNames=exports.arrayFields=exports.fieldTagTypes=exports.fieldTags=exports.fieldTagNames=void 0;var e={315:"Artist",258:"BitsPerSample",265:"CellLength",264:"CellWidth",320:"ColorMap",259:"Compression",33432:"Copyright",306:"DateTime",338:"ExtraSamples",266:"FillOrder",289:"FreeByteCounts",288:"FreeOffsets",291:"GrayResponseCurve",290:"GrayResponseUnit",316:"HostComputer",270:"ImageDescription",257:"ImageLength",256:"ImageWidth",271:"Make",281:"MaxSampleValue",280:"MinSampleValue",272:"Model",254:"NewSubfileType",274:"Orientation",262:"PhotometricInterpretation",284:"PlanarConfiguration",296:"ResolutionUnit",278:"RowsPerStrip",277:"SamplesPerPixel",305:"Software",279:"StripByteCounts",273:"StripOffsets",255:"SubfileType",263:"Threshholding",282:"XResolution",283:"YResolution",326:"BadFaxLines",327:"CleanFaxData",343:"ClipPath",328:"ConsecutiveBadFaxLines",433:"Decode",434:"DefaultImageColor",269:"DocumentName",336:"DotRange",321:"HalftoneHints",346:"Indexed",347:"JPEGTables",285:"PageName",297:"PageNumber",317:"Predictor",319:"PrimaryChromaticities",532:"ReferenceBlackWhite",339:"SampleFormat",340:"SMinSampleValue",341:"SMaxSampleValue",559:"StripRowCounts",330:"SubIFDs",292:"T4Options",293:"T6Options",325:"TileByteCounts",323:"TileLength",324:"TileOffsets",322:"TileWidth",301:"TransferFunction",318:"WhitePoint",344:"XClipPathUnits",286:"XPosition",529:"YCbCrCoefficients",531:"YCbCrPositioning",530:"YCbCrSubSampling",345:"YClipPathUnits",287:"YPosition",37378:"ApertureValue",40961:"ColorSpace",36868:"DateTimeDigitized",36867:"DateTimeOriginal",34665:"Exif IFD",36864:"ExifVersion",33434:"ExposureTime",41728:"FileSource",37385:"Flash",40960:"FlashpixVersion",33437:"FNumber",42016:"ImageUniqueID",37384:"LightSource",37500:"MakerNote",37377:"ShutterSpeedValue",37510:"UserComment",33723:"IPTC",34675:"ICC Profile",700:"XMP",42112:"GDAL_METADATA",42113:"GDAL_NODATA",34377:"Photoshop",33550:"ModelPixelScale",33922:"ModelTiepoint",34264:"ModelTransformation",34735:"GeoKeyDirectory",34736:"GeoDoubleParams",34737:"GeoAsciiParams"};exports.fieldTagNames=e;var o={};for(var r in exports.fieldTags=o,e)e.hasOwnProperty(r)&&(o[e[r]]=parseInt(r,10));var t={256:"SHORT",257:"SHORT",258:"SHORT",259:"SHORT",262:"SHORT",273:"LONG",274:"SHORT",277:"SHORT",278:"LONG",279:"LONG",282:"RATIONAL",283:"RATIONAL",284:"SHORT",286:"SHORT",287:"RATIONAL",296:"SHORT",305:"ASCII",306:"ASCII",338:"SHORT",339:"SHORT",513:"LONG",514:"LONG",1024:"SHORT",1025:"SHORT",2048:"SHORT",2049:"ASCII",33550:"DOUBLE",33922:"DOUBLE",34665:"LONG",34735:"SHORT",34737:"ASCII",42113:"ASCII"};exports.fieldTagTypes=t;var i=[o.BitsPerSample,o.ExtraSamples,o.SampleFormat,o.StripByteCounts,o.StripOffsets,o.StripRowCounts,o.TileByteCounts,o.TileOffsets];exports.arrayFields=i;var a={1:"BYTE",2:"ASCII",3:"SHORT",4:"LONG",5:"RATIONAL",6:"SBYTE",7:"UNDEFINED",8:"SSHORT",9:"SLONG",10:"SRATIONAL",11:"FLOAT",12:"DOUBLE",13:"IFD",16:"LONG8",17:"SLONG8",18:"IFD8"};exports.fieldTypeNames=a;var s={};for(var n in exports.fieldTypes=s,a)a.hasOwnProperty(n)&&(s[a[n]]=parseInt(n,10));var l={WhiteIsZero:0,BlackIsZero:1,RGB:2,Palette:3,TransparencyMask:4,CMYK:5,YCbCr:6,CIELab:8,ICCLab:9};exports.photometricInterpretations=l;var p={Unspecified:0,Assocalpha:1,Unassalpha:2};exports.ExtraSamplesValues=p;var G={1024:"GTModelTypeGeoKey",1025:"GTRasterTypeGeoKey",1026:"GTCitationGeoKey",2048:"GeographicTypeGeoKey",2049:"GeogCitationGeoKey",2050:"GeogGeodeticDatumGeoKey",2051:"GeogPrimeMeridianGeoKey",2052:"GeogLinearUnitsGeoKey",2053:"GeogLinearUnitSizeGeoKey",2054:"GeogAngularUnitsGeoKey",2055:"GeogAngularUnitSizeGeoKey",2056:"GeogEllipsoidGeoKey",2057:"GeogSemiMajorAxisGeoKey",2058:"GeogSemiMinorAxisGeoKey",2059:"GeogInvFlatteningGeoKey",2060:"GeogAzimuthUnitsGeoKey",2061:"GeogPrimeMeridianLongGeoKey",2062:"GeogTOWGS84GeoKey",3072:"ProjectedCSTypeGeoKey",3073:"PCSCitationGeoKey",3074:"ProjectionGeoKey",3075:"ProjCoordTransGeoKey",3076:"ProjLinearUnitsGeoKey",3077:"ProjLinearUnitSizeGeoKey",3078:"ProjStdParallel1GeoKey",3079:"ProjStdParallel2GeoKey",3080:"ProjNatOriginLongGeoKey",3081:"ProjNatOriginLatGeoKey",3082:"ProjFalseEastingGeoKey",3083:"ProjFalseNorthingGeoKey",3084:"ProjFalseOriginLongGeoKey",3085:"ProjFalseOriginLatGeoKey",3086:"ProjFalseOriginEastingGeoKey",3087:"ProjFalseOriginNorthingGeoKey",3088:"ProjCenterLongGeoKey",3089:"ProjCenterLatGeoKey",3090:"ProjCenterEastingGeoKey",3091:"ProjCenterNorthingGeoKey",3092:"ProjScaleAtNatOriginGeoKey",3093:"ProjScaleAtCenterGeoKey",3094:"ProjAzimuthAngleGeoKey",3095:"ProjStraightVertPoleLongGeoKey",3096:"ProjRectifiedGridAngleGeoKey",4096:"VerticalCSTypeGeoKey",4097:"VerticalCitationGeoKey",4098:"VerticalDatumGeoKey",4099:"VerticalUnitsGeoKey"};exports.geoKeyNames=G;var y={};for(var S in exports.geoKeys=y,G)G.hasOwnProperty(S)&&(y[G[S]]=parseInt(S,10));
},{}],"fpBl":[function(require,module,exports) {
"use strict";function t(t,r){for(var e,n=t.width,h=t.height,o=new Uint8Array(n*h*3),a=0,i=0;a<t.length;++a,i+=3)e=256-t[a]/r*256,o[i]=e,o[i+1]=e,o[i+2]=e;return o}function r(t,r){for(var e,n=t.width,h=t.height,o=new Uint8Array(n*h*3),a=0,i=0;a<t.length;++a,i+=3)e=t[a]/r*256,o[i]=e,o[i+1]=e,o[i+2]=e;return o}function e(t,r){for(var e=t.width,n=t.height,h=new Uint8Array(e*n*3),o=r.length/3,a=r.length/3*2,i=0,f=0;i<t.length;++i,f+=3){var u=t[i];h[f]=r[u]/65536*256,h[f+1]=r[u+o]/65536*256,h[f+2]=r[u+a]/65536*256}return h}function n(t){for(var r=t.width,e=t.height,n=new Uint8Array(r*e*3),h=0,o=0;h<t.length;h+=4,o+=3){var a=t[h],i=t[h+1],f=t[h+2],u=t[h+3];n[o]=(255-a)/256*255*((255-u)/256),n[o+1]=(255-i)/256*255*((255-u)/256),n[o+2]=(255-f)/256*255*((255-u)/256)}return n}function h(t){for(var r=t.width,e=t.height,n=new Uint8ClampedArray(r*e*3),h=0,o=0;h<t.length;h+=3,o+=3){var a=t[h],i=t[h+1],f=t[h+2];n[o]=a+1.402*(f-128),n[o+1]=a-.34414*(i-128)-.71414*(f-128),n[o+2]=a+1.772*(i-128)}return n}Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromWhiteIsZero=t,exports.fromBlackIsZero=r,exports.fromPalette=e,exports.fromCMYK=n,exports.fromYCbCr=h,exports.fromCIELab=f;var o=.95047,a=1,i=1.08883;function f(t){for(var r=t.width,e=t.height,n=new Uint8Array(r*e*3),h=0,f=0;h<t.length;h+=3,f+=3){var u=(t[h+0]+16)/116,v=(t[h+1]<<24>>24)/500+u,w=u-(t[h+2]<<24>>24)/200,g=void 0,l=void 0,m=void 0;l=-.9689*(v=o*(v*v*v>.008856?v*v*v:(v-16/116)/7.787))+1.8758*(u=a*(u*u*u>.008856?u*u*u:(u-16/116)/7.787))+.0415*(w=i*(w*w*w>.008856?w*w*w:(w-16/116)/7.787)),m=.0557*v+-.204*u+1.057*w,g=(g=3.2406*v+-1.5372*u+-.4986*w)>.0031308?1.055*Math.pow(g,1/2.4)-.055:12.92*g,l=l>.0031308?1.055*Math.pow(l,1/2.4)-.055:12.92*l,m=m>.0031308?1.055*Math.pow(m,1/2.4)-.055:12.92*m,n[f]=255*Math.max(0,Math.min(1,g)),n[f+1]=255*Math.max(0,Math.min(1,l)),n[f+2]=255*Math.max(0,Math.min(1,m))}return n}
},{}],"IKSA":[function(require,module,exports) {
"use strict";function r(r,e){var t=r.length-e,o=0;do{for(var n=e;n>0;n--)r[o+e]+=r[o],o++;t-=e}while(t>0)}function e(r,e,t){for(var o=0,n=r.length,a=n/t;n>e;){for(var i=e;i>0;--i)r[o+e]+=r[o],++o;n-=e}for(var l=r.slice(),s=0;s<a;++s)for(var c=0;c<t;++c)r[t*s+c]=l[(t-c-1)*a+s]}function t(t,o,n,a,i,l){if(!o||1===o)return t;for(var s=0;s<i.length;++s){if(i[s]%8!=0)throw new Error("When decoding with predictor, only multiple of 8 bits are supported.");if(i[s]!==i[0])throw new Error("When decoding with predictor, all samples must have the same size.")}for(var c=i[0]/8,f=2===l?1:i.length,h=0;h<a&&!(h*f*n*c>=t.byteLength);++h){var w=void 0;if(2===o){switch(i[0]){case 8:w=new Uint8Array(t,h*f*n*c,f*n*c);break;case 16:w=new Uint16Array(t,h*f*n*c,f*n*c/2);break;case 32:w=new Uint32Array(t,h*f*n*c,f*n*c/4);break;default:throw new Error("Predictor 2 not allowed with ".concat(i[0]," bits per sample."))}r(w,f,c)}else 3===o&&e(w=new Uint8Array(t,h*f*n*c,f*n*c),f,c)}return t}Object.defineProperty(exports,"__esModule",{value:!0}),exports.applyPredictor=t;
},{}],"FJDe":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=u(require("@babel/runtime/regenerator")),r=u(require("@babel/runtime/helpers/asyncToGenerator")),t=u(require("@babel/runtime/helpers/classCallCheck")),a=u(require("@babel/runtime/helpers/createClass")),n=require("../predictor");function u(e){return e&&e.__esModule?e:{default:e}}var i=function(){function u(){(0,t.default)(this,u)}return(0,a.default)(u,[{key:"decode",value:function(){var t=(0,r.default)(e.default.mark(function r(t,a){var u,i,s,l,o;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.decodeBlock(a);case 2:if(u=e.sent,1===(i=t.Predictor||1)){e.next=9;break}return s=!t.StripOffsets,l=s?t.TileWidth:t.ImageWidth,o=s?t.TileLength:t.RowsPerStrip||t.ImageLength,e.abrupt("return",(0,n.applyPredictor)(u,i,l,o,t.BitsPerSample,t.PlanarConfiguration));case 9:return e.abrupt("return",u);case 10:case"end":return e.stop()}},r,this)}));return function(e,r){return t.apply(this,arguments)}}()}]),u}();exports.default=i;
},{"@babel/runtime/regenerator":"PMvg","@babel/runtime/helpers/asyncToGenerator":"agGE","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","../predictor":"IKSA"}],"V9bQ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("@babel/runtime/helpers/classCallCheck")),t=i(require("@babel/runtime/helpers/createClass")),r=i(require("@babel/runtime/helpers/inherits")),u=i(require("@babel/runtime/helpers/possibleConstructorReturn")),n=i(require("@babel/runtime/helpers/getPrototypeOf")),l=i(require("./basedecoder"));function i(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=o();return function(){var r,l=(0,n.default)(e);if(t){var i=(0,n.default)(this).constructor;r=Reflect.construct(l,arguments,i)}else r=l.apply(this,arguments);return(0,u.default)(this,r)}}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var a=function(u){(0,r.default)(l,u);var n=c(l);function l(){return(0,e.default)(this,l),n.apply(this,arguments)}return(0,t.default)(l,[{key:"decodeBlock",value:function(e){return e}}]),l}(l.default);exports.default=a;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/inherits":"d4H2","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","./basedecoder":"FJDe"}],"tcId":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=a(require("@babel/runtime/helpers/classCallCheck")),r=a(require("@babel/runtime/helpers/createClass")),t=a(require("@babel/runtime/helpers/inherits")),n=a(require("@babel/runtime/helpers/possibleConstructorReturn")),u=a(require("@babel/runtime/helpers/getPrototypeOf")),o=a(require("./basedecoder"));function a(e){return e&&e.__esModule?e:{default:e}}function i(e){var r=f();return function(){var t,o=(0,u.default)(e);if(r){var a=(0,u.default)(this).constructor;t=Reflect.construct(o,arguments,a)}else t=o.apply(this,arguments);return(0,n.default)(this,t)}}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var c=9,l=256,s=257,h=12;function d(e,r,t){var n=r%8,u=Math.floor(r/8),o=8-n,a=r+t-8*(u+1),i=8*(u+2)-(r+t),f=8*(u+2)-r;if(i=Math.max(0,i),u>=e.length)return console.warn("ran off the end of the buffer before finding EOI_CODE (end on input code)"),s;var c=e[u]&Math.pow(2,8-n)-1,l=c<<=t-o;if(u+1<e.length){var h=e[u+1]>>>i;l+=h<<=Math.max(0,t-f)}if(a>8&&u+2<e.length){var d=8*(u+3)-(r+t);l+=e[u+2]>>>d}return l}function p(e,r){for(var t=r.length-1;t>=0;t--)e.push(r[t]);return e}function v(e){for(var r=new Uint16Array(4093),t=new Uint8Array(4093),n=0;n<=257;n++)r[n]=4096,t[n]=n;var u=258,o=c,a=0;function i(){u=258,o=c}function f(e){var r=d(e,a,o);return a+=o,r}function v(e,n){return t[u]=n,r[u]=e,++u-1}function b(e){for(var n=[],u=e;4096!==u;u=r[u])n.push(t[u]);return n}var y=[];i();for(var g,w=new Uint8Array(e),m=f(w);m!==s;){if(m===l){for(i(),m=f(w);m===l;)m=f(w);if(m===s)break;if(m>l)throw new Error("corrupted code at scanline ".concat(m));p(y,b(m)),g=m}else if(m<u){var M=b(m);p(y,M),v(g,M[M.length-1]),g=m}else{var q=b(g);if(!q)throw new Error("Bogus entry. Not in dictionary, ".concat(g," / ").concat(u,", position: ").concat(a));p(y,q),y.push(q[q.length-1]),v(g,q[q.length-1]),g=m}u+1>=Math.pow(2,o)&&(o===h?g=void 0:o++),m=f(w)}return new Uint8Array(y)}var b=function(n){(0,t.default)(o,n);var u=i(o);function o(){return(0,e.default)(this,o),u.apply(this,arguments)}return(0,r.default)(o,[{key:"decodeBlock",value:function(e){return v(e,!1).buffer}}]),o}(o.default);exports.default=b;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/inherits":"d4H2","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","./basedecoder":"FJDe"}],"J7kk":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("@babel/runtime/helpers/inherits")),r=i(require("@babel/runtime/helpers/possibleConstructorReturn")),n=i(require("@babel/runtime/helpers/getPrototypeOf")),a=i(require("@babel/runtime/helpers/classCallCheck")),t=i(require("@babel/runtime/helpers/createClass")),s=i(require("@babel/runtime/helpers/typeof")),o=i(require("./basedecoder"));function i(e){return e&&e.__esModule?e:{default:e}}function f(e){var a=u();return function(){var t,s=(0,n.default)(e);if(a){var o=(0,n.default)(this).constructor;t=Reflect.construct(s,arguments,o)}else t=s.apply(this,arguments);return(0,r.default)(this,t)}}function u(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var c=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]),l=4017,h=799,v=3406,d=2276,m=1567,b=3784,p=5793,k=2896;function w(e,r){for(var n=0,a=[],t=16;t>0&&!e[t-1];)--t;a.push({children:[],index:0});for(var s,o=a[0],i=0;i<t;i++){for(var f=0;f<e[i];f++){for((o=a.pop()).children[o.index]=r[n];o.index>0;)o=a.pop();for(o.index++,a.push(o);a.length<=i;)a.push(s={children:[],index:0}),o.children[o.index]=s.children,o=s;n++}i+1<t&&(a.push(s={children:[],index:0}),o.children[o.index]=s.children,o=s)}return a[0].children}function y(e,r,n,a,t,o,i,f,u){var l=n.mcusPerLine,h=n.progressive,v=r,d=r,m=0,b=0;function p(){if(b>0)return m>>--b&1;if(255===(m=e[d++])){var r=e[d++];if(r)throw new Error("unexpected marker: ".concat((m<<8|r).toString(16)))}return b=7,m>>>7}function k(e){for(var r,n=e;null!==(r=p());){if("number"==typeof(n=n[r]))return n;if("object"!==(0,s.default)(n))throw new Error("invalid huffman sequence")}return null}function w(e){for(var r=e,n=0;r>0;){var a=p();if(null===a)return;n=n<<1|a,--r}return n}function y(e){var r=w(e);return r>=1<<e-1?r:r+(-1<<e)+1}var C=0;var P,g=0;function x(e,r,n,a,t){var s=n%l,o=(n/l|0)*e.v+a,i=s*e.h+t;r(e,e.blocks[o][i])}function T(e,r,n){var a=n/e.blocksPerLine|0,t=n%e.blocksPerLine;r(e,e.blocks[a][t])}var A,q,L,D,E,I,O=a.length;I=h?0===o?0===f?function(e,r){var n=k(e.huffmanTableDC),a=0===n?0:y(n)<<u;e.pred+=a,r[0]=e.pred}:function(e,r){r[0]|=p()<<u}:0===f?function(e,r){if(C>0)C--;else for(var n=o,a=i;n<=a;){var t=k(e.huffmanTableAC),s=15&t,f=t>>4;if(0===s){if(f<15){C=w(f)+(1<<f)-1;break}n+=16}else r[c[n+=f]]=y(s)*(1<<u),n++}}:function(e,r){for(var n=o,a=i,t=0;n<=a;){var s=c[n],f=r[s]<0?-1:1;switch(g){case 0:var l=k(e.huffmanTableAC),h=15&l;if(t=l>>4,0===h)t<15?(C=w(t)+(1<<t),g=4):(t=16,g=1);else{if(1!==h)throw new Error("invalid ACn encoding");P=y(h),g=t?2:3}continue;case 1:case 2:r[s]?r[s]+=(p()<<u)*f:0==--t&&(g=2===g?3:0);break;case 3:r[s]?r[s]+=(p()<<u)*f:(r[s]=P<<u,g=0);break;case 4:r[s]&&(r[s]+=(p()<<u)*f)}n++}4===g&&0==--C&&(g=0)}:function(e,r){var n=k(e.huffmanTableDC),a=0===n?0:y(n);e.pred+=a,r[0]=e.pred;for(var t=1;t<64;){var s=k(e.huffmanTableAC),o=15&s,i=s>>4;if(0===o){if(i<15)break;t+=16}else r[c[t+=i]]=y(o),t++}};var z,M,R=0;M=1===O?a[0].blocksPerLine*a[0].blocksPerColumn:l*n.mcusPerColumn;for(var U=t||M;R<M;){for(q=0;q<O;q++)a[q].pred=0;if(C=0,1===O)for(A=a[0],E=0;E<U;E++)T(A,I,R),R++;else for(E=0;E<U;E++){for(q=0;q<O;q++){var j=A=a[q],S=j.h,_=j.v;for(L=0;L<_;L++)for(D=0;D<S;D++)x(A,I,R,L,D)}if(++R===M)break}if(b=0,(z=e[d]<<8|e[d+1])<65280)throw new Error("marker was not found");if(!(z>=65488&&z<=65495))break;d+=2}return d-v}function C(e,r){var n=[],a=r.blocksPerLine,t=r.blocksPerColumn,s=a<<3,o=new Int32Array(64),i=new Uint8Array(64);function f(e,n,a){var t,s,o,i,f,u,c,w,y,C,P=r.quantizationTable,g=a;for(C=0;C<64;C++)g[C]=e[C]*P[C];for(C=0;C<8;++C){var x=8*C;0!==g[1+x]||0!==g[2+x]||0!==g[3+x]||0!==g[4+x]||0!==g[5+x]||0!==g[6+x]||0!==g[7+x]?(t=p*g[0+x]+128>>8,s=p*g[4+x]+128>>8,o=g[2+x],i=g[6+x],f=k*(g[1+x]-g[7+x])+128>>8,w=k*(g[1+x]+g[7+x])+128>>8,u=g[3+x]<<4,c=g[5+x]<<4,y=t-s+1>>1,t=t+s+1>>1,s=y,y=o*b+i*m+128>>8,o=o*m-i*b+128>>8,i=y,y=f-c+1>>1,f=f+c+1>>1,c=y,y=w+u+1>>1,u=w-u+1>>1,w=y,y=t-i+1>>1,t=t+i+1>>1,i=y,y=s-o+1>>1,s=s+o+1>>1,o=y,y=f*d+w*v+2048>>12,f=f*v-w*d+2048>>12,w=y,y=u*h+c*l+2048>>12,u=u*l-c*h+2048>>12,c=y,g[0+x]=t+w,g[7+x]=t-w,g[1+x]=s+c,g[6+x]=s-c,g[2+x]=o+u,g[5+x]=o-u,g[3+x]=i+f,g[4+x]=i-f):(y=p*g[0+x]+512>>10,g[0+x]=y,g[1+x]=y,g[2+x]=y,g[3+x]=y,g[4+x]=y,g[5+x]=y,g[6+x]=y,g[7+x]=y)}for(C=0;C<8;++C){var T=C;0!==g[8+T]||0!==g[16+T]||0!==g[24+T]||0!==g[32+T]||0!==g[40+T]||0!==g[48+T]||0!==g[56+T]?(t=p*g[0+T]+2048>>12,s=p*g[32+T]+2048>>12,o=g[16+T],i=g[48+T],f=k*(g[8+T]-g[56+T])+2048>>12,w=k*(g[8+T]+g[56+T])+2048>>12,u=g[24+T],c=g[40+T],y=t-s+1>>1,t=t+s+1>>1,s=y,y=o*b+i*m+2048>>12,o=o*m-i*b+2048>>12,i=y,y=f-c+1>>1,f=f+c+1>>1,c=y,y=w+u+1>>1,u=w-u+1>>1,w=y,y=t-i+1>>1,t=t+i+1>>1,i=y,y=s-o+1>>1,s=s+o+1>>1,o=y,y=f*d+w*v+2048>>12,f=f*v-w*d+2048>>12,w=y,y=u*h+c*l+2048>>12,u=u*l-c*h+2048>>12,c=y,g[0+T]=t+w,g[56+T]=t-w,g[8+T]=s+c,g[48+T]=s-c,g[16+T]=o+u,g[40+T]=o-u,g[24+T]=i+f,g[32+T]=i-f):(y=p*a[C+0]+8192>>14,g[0+T]=y,g[8+T]=y,g[16+T]=y,g[24+T]=y,g[32+T]=y,g[40+T]=y,g[48+T]=y,g[56+T]=y)}for(C=0;C<64;++C){var A=128+(g[C]+8>>4);n[C]=A<0?0:A>255?255:A}}for(var u=0;u<t;u++){for(var c=u<<3,w=0;w<8;w++)n.push(new Uint8Array(s));for(var y=0;y<a;y++){f(r.blocks[u][y],i,o);for(var C=0,P=y<<3,g=0;g<8;g++)for(var x=n[c+g],T=0;T<8;T++)x[P+T]=i[C++]}}return n}var P=function(){function e(){(0,a.default)(this,e),this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}return(0,t.default)(e,[{key:"resetFrames",value:function(){this.frames=[]}},{key:"parse",value:function(e){var r=0;function n(){var n=e[r]<<8|e[r+1];return r+=2,n}function a(e){var r,n,a=0,t=0;for(n in e.components)e.components.hasOwnProperty(n)&&(a<(r=e.components[n]).h&&(a=r.h),t<r.v&&(t=r.v));var s=Math.ceil(e.samplesPerLine/8/a),o=Math.ceil(e.scanLines/8/t);for(n in e.components)if(e.components.hasOwnProperty(n)){r=e.components[n];for(var i=Math.ceil(Math.ceil(e.samplesPerLine/8)*r.h/a),f=Math.ceil(Math.ceil(e.scanLines/8)*r.v/t),u=s*r.h,c=o*r.v,l=[],h=0;h<c;h++){for(var v=[],d=0;d<u;d++)v.push(new Int32Array(64));l.push(v)}r.blocksPerLine=i,r.blocksPerColumn=f,r.blocks=l}e.maxH=a,e.maxV=t,e.mcusPerLine=s,e.mcusPerColumn=o}var t,s,o=n();if(65496!==o)throw new Error("SOI not found");for(o=n();65497!==o;){switch(o){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:var i=(t=void 0,s=void 0,t=n(),s=e.subarray(r,r+t-2),r+=s.length,s);65504===o&&74===i[0]&&70===i[1]&&73===i[2]&&70===i[3]&&0===i[4]&&(this.jfif={version:{major:i[5],minor:i[6]},densityUnits:i[7],xDensity:i[8]<<8|i[9],yDensity:i[10]<<8|i[11],thumbWidth:i[12],thumbHeight:i[13],thumbData:i.subarray(14,14+3*i[12]*i[13])}),65518===o&&65===i[0]&&100===i[1]&&111===i[2]&&98===i[3]&&101===i[4]&&0===i[5]&&(this.adobe={version:i[6],flags0:i[7]<<8|i[8],flags1:i[9]<<8|i[10],transformCode:i[11]});break;case 65499:for(var f=n()+r-2;r<f;){var u=e[r++],l=new Int32Array(64);if(u>>4==0)for(var h=0;h<64;h++){l[c[h]]=e[r++]}else{if(u>>4!=1)throw new Error("DQT: invalid table spec");for(var v=0;v<64;v++){l[c[v]]=n()}}this.quantizationTables[15&u]=l}break;case 65472:case 65473:case 65474:n();for(var d={extended:65473===o,progressive:65474===o,precision:e[r++],scanLines:n(),samplesPerLine:n(),components:{},componentsOrder:[]},m=e[r++],b=void 0,p=0;p<m;p++){b=e[r];var k=e[r+1]>>4,C=15&e[r+1],P=e[r+2];d.componentsOrder.push(b),d.components[b]={h:k,v:C,quantizationIdx:P},r+=3}a(d),this.frames.push(d);break;case 65476:for(var g=n(),x=2;x<g;){for(var T=e[r++],A=new Uint8Array(16),q=0,L=0;L<16;L++,r++)A[L]=e[r],q+=A[L];for(var D=new Uint8Array(q),E=0;E<q;E++,r++)D[E]=e[r];x+=17+q,T>>4==0?this.huffmanTablesDC[15&T]=w(A,D):this.huffmanTablesAC[15&T]=w(A,D)}break;case 65501:n(),this.resetInterval=n();break;case 65498:n();for(var I=e[r++],O=[],z=this.frames[0],M=0;M<I;M++){var R=z.components[e[r++]],U=e[r++];R.huffmanTableDC=this.huffmanTablesDC[U>>4],R.huffmanTableAC=this.huffmanTablesAC[15&U],O.push(R)}var j=e[r++],S=e[r++],_=e[r++],F=y(e,r,z,O,this.resetInterval,j,S,_>>4,15&_);r+=F;break;case 65535:255!==e[r]&&r--;break;default:if(255===e[r-3]&&e[r-2]>=192&&e[r-2]<=254){r-=3;break}throw new Error("unknown JPEG marker ".concat(o.toString(16)))}o=n()}}},{key:"getResult",value:function(){var e=this.frames;if(0===this.frames.length)throw new Error("no frames were decoded");this.frames.length>1&&console.warn("more than one frame is not supported");for(var r=0;r<this.frames.length;r++)for(var n=this.frames[r].components,a=0,t=Object.keys(n);a<t.length;a++){var s=t[a];n[s].quantizationTable=this.quantizationTables[n[s].quantizationIdx],delete n[s].quantizationIdx}for(var o=e[0],i=o.components,f=o.componentsOrder,u=[],c=o.samplesPerLine,l=o.scanLines,h=0;h<f.length;h++){var v=i[f[h]];u.push({lines:C(o,v),scaleX:v.h/o.maxH,scaleY:v.v/o.maxV})}for(var d=new Uint8Array(c*l*u.length),m=0,b=0;b<l;++b)for(var p=0;p<c;++p)for(var k=0;k<u.length;++k){var w=u[k];d[m]=w.lines[0|b*w.scaleY][0|p*w.scaleX],++m}return d}}]),e}(),g=function(r){(0,e.default)(s,r);var n=f(s);function s(e){var r;return(0,a.default)(this,s),(r=n.call(this)).reader=new P,e.JPEGTables&&r.reader.parse(e.JPEGTables),r}return(0,t.default)(s,[{key:"decodeBlock",value:function(e){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(e)),this.reader.getResult().buffer}}]),s}(o.default);exports.default=g;
},{"@babel/runtime/helpers/inherits":"d4H2","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/typeof":"b9XL","./basedecoder":"FJDe"}],"OcPz":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("@babel/runtime/helpers/classCallCheck")),t=i(require("@babel/runtime/helpers/createClass")),r=i(require("@babel/runtime/helpers/inherits")),u=i(require("@babel/runtime/helpers/possibleConstructorReturn")),n=i(require("@babel/runtime/helpers/getPrototypeOf")),a=i(require("./basedecoder"));function i(e){return e&&e.__esModule?e:{default:e}}function l(e){var t=f();return function(){var r,a=(0,n.default)(e);if(t){var i=(0,n.default)(this).constructor;r=Reflect.construct(a,arguments,i)}else r=a.apply(this,arguments);return(0,u.default)(this,r)}}function f(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}var o=function(u){(0,r.default)(a,u);var n=l(a);function a(){return(0,e.default)(this,a),n.apply(this,arguments)}return(0,t.default)(a,[{key:"decodeBlock",value:function(e){for(var t=new DataView(e),r=[],u=0;u<e.byteLength;++u){var n=t.getInt8(u);if(n<0){var a=t.getUint8(u+1);n=-n;for(var i=0;i<=n;++i)r.push(a);u+=1}else{for(var l=0;l<=n;++l)r.push(t.getUint8(u+l+1));u+=n+1}}return new Uint8Array(r).buffer}}]),a}(a.default);exports.default=o;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/inherits":"d4H2","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","./basedecoder":"FJDe"}],"FGCZ":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.getDecoder=s;var e=n(require("./raw")),r=n(require("./lzw")),t=n(require("./jpeg")),o=n(require("./packbits"));function n(e){return e&&e.__esModule?e:{default:e}}function s(n){switch(n.Compression){case void 0:case 1:return new e.default;case 5:return new r.default;case 6:throw new Error("old style JPEG compression is not supported.");case 7:return new t.default(n);case 8:case 32773:return new o.default;default:throw new Error("Unknown compression method identifier: ".concat(n.Compression))}}
},{"./raw":"V9bQ","./lzw":"tcId","./jpeg":"J7kk","./packbits":"OcPz"}],"OQju":[function(require,module,exports) {
"use strict";function r(r,e,t){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return new(Object.getPrototypeOf(r).constructor)(e*t*a)}function e(e,t,a,n,o){var i=t/n,s=a/o;return e.map(function(e){for(var u=r(e,n,o),l=0;l<o;++l)for(var c=Math.min(Math.round(s*l),a-1),h=0;h<n;++h){var f=Math.min(Math.round(i*h),t-1),v=e[c*t+f];u[l*n+h]=v}return u})}function t(r,e,t){return(1-t)*r+t*e}function a(e,a,n,o,i){var s=a/o,u=n/i;return e.map(function(e){for(var l=r(e,o,i),c=0;c<i;++c)for(var h=u*c,f=Math.floor(h),v=Math.min(Math.ceil(h),n-1),p=0;p<o;++p){var M=s*p,m=M%1,d=Math.floor(M),w=Math.min(Math.ceil(M),a-1),x=e[f*a+d],g=e[f*a+w],b=e[v*a+d],I=e[v*a+w],O=t(t(x,g,m),t(b,I,m),h%1);l[c*o+p]=O}return l})}function n(r,t,n,o,i){var s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"nearest";switch(s.toLowerCase()){case"nearest":return e(r,t,n,o,i);case"bilinear":case"linear":return a(r,t,n,o,i);default:throw new Error("Unsupported resampling method: '".concat(s,"'"))}}function o(e,t,a,n,o,i){for(var s=t/n,u=a/o,l=r(e,n,o,i),c=0;c<o;++c)for(var h=Math.min(Math.round(u*c),a-1),f=0;f<n;++f)for(var v=Math.min(Math.round(s*f),t-1),p=0;p<i;++p){var M=e[h*t*i+v*i+p];l[c*n*i+f*i+p]=M}return l}function i(e,a,n,o,i,s){for(var u=a/o,l=n/i,c=r(e,o,i,s),h=0;h<i;++h)for(var f=l*h,v=Math.floor(f),p=Math.min(Math.ceil(f),n-1),M=0;M<o;++M)for(var m=u*M,d=m%1,w=Math.floor(m),x=Math.min(Math.ceil(m),a-1),g=0;g<s;++g){var b=e[v*a*s+w*s+g],I=e[v*a*s+x*s+g],O=e[p*a*s+w*s+g],j=e[p*a*s+x*s+g],y=t(t(b,I,d),t(O,j,d),f%1);c[h*o*s+M*s+g]=y}return c}function s(r,e,t,a,n,s){var u=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"nearest";switch(u.toLowerCase()){case"nearest":return o(r,e,t,a,n,s);case"bilinear":case"linear":return i(r,e,t,a,n,s);default:throw new Error("Unsupported resampling method: '".concat(u,"'"))}}Object.defineProperty(exports,"__esModule",{value:!0}),exports.resampleNearest=e,exports.resampleBilinear=a,exports.resample=n,exports.resampleNearestInterleaved=o,exports.resampleBilinearInterleaved=i,exports.resampleInterleaved=s;
},{}],"eOWo":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=h(require("@babel/runtime/helpers/slicedToArray")),t=h(require("@babel/runtime/regenerator")),r=h(require("@babel/runtime/helpers/asyncToGenerator")),i=h(require("@babel/runtime/helpers/classCallCheck")),a=h(require("@babel/runtime/helpers/createClass")),n=require("./globals"),o=require("./rgb"),s=require("./compression"),l=require("./resample");function h(e){return e&&e.__esModule?e:{default:e}}function u(e,t,r){for(var i=0,a=t;a<r;++a)i+=e[a];return i}function c(e,t,r){switch(e){case 1:switch(t){case 8:return new Uint8Array(r);case 16:return new Uint16Array(r);case 32:return new Uint32Array(r)}break;case 2:switch(t){case 8:return new Int8Array(r);case 16:return new Int16Array(r);case 32:return new Int32Array(r)}break;case 3:switch(t){case 32:return new Float32Array(r);case 64:return new Float64Array(r)}}throw Error("Unsupported data format/bitsPerSample")}var p=function(){function h(e,t,r,a,n,o){(0,i.default)(this,h),this.fileDirectory=e,this.geoKeys=t,this.dataView=r,this.littleEndian=a,this.tiles=n?{}:null,this.isTiled=!e.StripOffsets;var s=e.PlanarConfiguration;if(this.planarConfiguration=void 0===s?1:s,1!==this.planarConfiguration&&2!==this.planarConfiguration)throw new Error("Invalid planar configuration.");this.source=o}return(0,a.default)(h,[{key:"getFileDirectory",value:function(){return this.fileDirectory}},{key:"getGeoKeys",value:function(){return this.geoKeys}},{key:"getWidth",value:function(){return this.fileDirectory.ImageWidth}},{key:"getHeight",value:function(){return this.fileDirectory.ImageLength}},{key:"getSamplesPerPixel",value:function(){return this.fileDirectory.SamplesPerPixel}},{key:"getTileWidth",value:function(){return this.isTiled?this.fileDirectory.TileWidth:this.getWidth()}},{key:"getTileHeight",value:function(){return this.isTiled?this.fileDirectory.TileLength:void 0!==this.fileDirectory.RowsPerStrip?Math.min(this.fileDirectory.RowsPerStrip,this.getHeight()):this.getHeight()}},{key:"getBytesPerPixel",value:function(){for(var e=0,t=0;t<this.fileDirectory.BitsPerSample.length;++t){var r=this.fileDirectory.BitsPerSample[t];if(r%8!=0)throw new Error("Sample bit-width of ".concat(r," is not supported."));if(r!==this.fileDirectory.BitsPerSample[0])throw new Error("Differing size of samples in a pixel are not supported.");e+=r}return e/8}},{key:"getSampleByteSize",value:function(e){if(e>=this.fileDirectory.BitsPerSample.length)throw new RangeError("Sample index ".concat(e," is out of range."));var t=this.fileDirectory.BitsPerSample[e];if(t%8!=0)throw new Error("Sample bit-width of ".concat(t," is not supported."));return t/8}},{key:"getReaderForSample",value:function(e){var t=this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,r=this.fileDirectory.BitsPerSample[e];switch(t){case 1:switch(r){case 8:return DataView.prototype.getUint8;case 16:return DataView.prototype.getUint16;case 32:return DataView.prototype.getUint32}break;case 2:switch(r){case 8:return DataView.prototype.getInt8;case 16:return DataView.prototype.getInt16;case 32:return DataView.prototype.getInt32}break;case 3:switch(r){case 32:return DataView.prototype.getFloat32;case 64:return DataView.prototype.getFloat64}}throw Error("Unsupported data format/bitsPerSample")}},{key:"getArrayForSample",value:function(e,t){return c(this.fileDirectory.SampleFormat?this.fileDirectory.SampleFormat[e]:1,this.fileDirectory.BitsPerSample[e],t)}},{key:"getTileOrStrip",value:function(){var e=(0,r.default)(t.default.mark(function e(r,i,a,n){var o,s,l,h,u,c,p,f;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=Math.ceil(this.getWidth()/this.getTileWidth()),s=Math.ceil(this.getHeight()/this.getTileHeight()),h=this.tiles,1===this.planarConfiguration?l=i*o+r:2===this.planarConfiguration&&(l=a*o*s+i*o+r),this.isTiled?(u=this.fileDirectory.TileOffsets[l],c=this.fileDirectory.TileByteCounts[l]):(u=this.fileDirectory.StripOffsets[l],c=this.fileDirectory.StripByteCounts[l]),e.next=7,this.source.fetch(u,c);case 7:return p=e.sent,null===h?f=n.decode(this.fileDirectory,p):h[l]||(f=n.decode(this.fileDirectory,p),h[l]=f),e.t0=r,e.t1=i,e.t2=a,e.next=14,f;case 14:return e.t3=e.sent,e.abrupt("return",{x:e.t0,y:e.t1,sample:e.t2,data:e.t3});case 16:case"end":return e.stop()}},e,this)}));return function(t,r,i,a){return e.apply(this,arguments)}}()},{key:"_readRaster",value:function(){var e=(0,r.default)(t.default.mark(function e(r,i,a,n,o,s,h,c){var p,f,g,d,y,m,w,v,D,b,k,x,M,S,I,T,P,C,A=this;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(p=this.getTileWidth(),f=this.getTileHeight(),g=Math.max(Math.floor(r[0]/p),0),d=Math.min(Math.ceil(r[2]/p),Math.ceil(this.getWidth()/this.getTileWidth())),y=Math.max(Math.floor(r[1]/f),0),m=Math.min(Math.ceil(r[3]/f),Math.ceil(this.getHeight()/this.getTileHeight())),w=r[2]-r[0],v=this.getBytesPerPixel(),D=[],b=[],k=0;k<i.length;++k)1===this.planarConfiguration?D.push(u(this.fileDirectory.BitsPerSample,0,i[k])/8):D.push(0),b.push(this.getReaderForSample(i[k]));for(x=[],M=this.littleEndian,S=y;S<m;++S)for(I=g;I<d;++I)for(T=function(e){var t=e,s=i[e];2===A.planarConfiguration&&(v=A.getSampleByteSize(s));var l=A.getTileOrStrip(I,S,s,o);x.push(l),l.then(function(e){for(var o=e.data,s=new DataView(o),l=e.y*f,h=e.x*p,u=(e.y+1)*f,c=(e.x+1)*p,g=b[t],d=Math.min(f,f-(u-r[3])),y=Math.min(p,p-(c-r[2])),m=Math.max(0,r[1]-l);m<d;++m)for(var k=Math.max(0,r[0]-h);k<y;++k){var x=(m*p+k)*v,S=g.call(s,x+D[t],M),I=void 0;n?(I=(m+l-r[1])*w*i.length+(k+h-r[0])*i.length+t,a[I]=S):(I=(m+l-r[1])*w+k+h-r[0],a[t][I]=S)}})},P=0;P<i.length;++P)T(P);return e.next=16,Promise.all(x);case 16:if(!(s&&r[2]-r[0]!==s||h&&r[3]-r[1]!==h)){e.next=21;break}return(C=n?(0,l.resampleInterleaved)(a,r[2]-r[0],r[3]-r[1],s,h,i.length,c):(0,l.resample)(a,r[2]-r[0],r[3]-r[1],s,h,c)).width=s,C.height=h,e.abrupt("return",C);case 21:return a.width=s||r[2]-r[0],a.height=h||r[3]-r[1],e.abrupt("return",a);case 24:case"end":return e.stop()}},e,this)}));return function(t,r,i,a,n,o,s,l){return e.apply(this,arguments)}}()},{key:"readRasters",value:function(){var e=(0,r.default)(t.default.mark(function e(){var r,i,a,n,o,l,h,u,p,f,g,d,y,m,w,v,D,b,k,x,M,S,I,T,P=arguments;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=P.length>0&&void 0!==P[0]?P[0]:{},i=r.window,a=r.samples,n=void 0===a?[]:a,o=r.interleave,l=r.pool,h=void 0===l?null:l,u=r.width,p=r.height,f=r.resampleMethod,g=r.fillValue,!((d=i||[0,0,this.getWidth(),this.getHeight()])[0]>d[2]||d[1]>d[3])){e.next=4;break}throw new Error("Invalid subsets");case 4:if(y=d[2]-d[0],m=d[3]-d[1],w=y*m,n&&n.length){e.next=11;break}for(v=0;v<this.fileDirectory.SamplesPerPixel;++v)n.push(v);e.next=18;break;case 11:D=0;case 12:if(!(D<n.length)){e.next=18;break}if(!(n[D]>=this.fileDirectory.SamplesPerPixel)){e.next=15;break}return e.abrupt("return",Promise.reject(new RangeError("Invalid sample index '".concat(n[D],"'."))));case 15:++D,e.next=12;break;case 18:if(o)k=this.fileDirectory.SampleFormat?Math.max.apply(null,this.fileDirectory.SampleFormat):1,x=Math.max.apply(null,this.fileDirectory.BitsPerSample),b=c(k,x,w*n.length),g&&b.fill(g);else for(b=[],M=0;M<n.length;++M)S=this.getArrayForSample(n[M],w),Array.isArray(g)&&M<g.length?S.fill(g[M]):g&&!Array.isArray(g)&&S.fill(g),b.push(S);return I=h||(0,s.getDecoder)(this.fileDirectory),e.next=22,this._readRaster(d,n,b,o,I,u,p,f);case 22:return T=e.sent,e.abrupt("return",T);case 24:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"readRGB",value:function(){var e=(0,r.default)(t.default.mark(function e(){var r,i,a,s,l,h,u,c,p,f,g,d,y,m,w,v,D,b,k,x=arguments;return t.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=x.length>0&&void 0!==x[0]?x[0]:{},i=r.window,a=r.pool,s=void 0===a?null:a,l=r.width,h=r.height,u=r.resampleMethod,c=r.enableAlpha,p=void 0!==c&&c,!((f=i||[0,0,this.getWidth(),this.getHeight()])[0]>f[2]||f[1]>f[3])){e.next=4;break}throw new Error("Invalid subsets");case 4:if((g=this.fileDirectory.PhotometricInterpretation)!==n.photometricInterpretations.RGB){e.next=9;break}if(d=[0,1,2],this.fileDirectory.ExtraSamples!==n.ExtraSamplesValues.Unspecified&&p)for(d=[],y=0;y<this.fileDirectory.BitsPerSample.length;y+=1)d.push(y);return e.abrupt("return",this.readRasters({window:i,interleave:!0,samples:d,pool:s,width:l,height:h}));case 9:e.t0=g,e.next=e.t0===n.photometricInterpretations.WhiteIsZero?12:e.t0===n.photometricInterpretations.BlackIsZero?12:e.t0===n.photometricInterpretations.Palette?12:e.t0===n.photometricInterpretations.CMYK?14:e.t0===n.photometricInterpretations.YCbCr?16:e.t0===n.photometricInterpretations.CIELab?16:18;break;case 12:return m=[0],e.abrupt("break",19);case 14:return m=[0,1,2,3],e.abrupt("break",19);case 16:return m=[0,1,2],e.abrupt("break",19);case 18:throw new Error("Invalid or unsupported photometric interpretation.");case 19:return w={window:f,interleave:!0,samples:m,pool:s,width:l,height:h,resampleMethod:u},v=this.fileDirectory,e.next=23,this.readRasters(w);case 23:D=e.sent,b=Math.pow(2,this.fileDirectory.BitsPerSample[0]),e.t1=g,e.next=e.t1===n.photometricInterpretations.WhiteIsZero?28:e.t1===n.photometricInterpretations.BlackIsZero?30:e.t1===n.photometricInterpretations.Palette?32:e.t1===n.photometricInterpretations.CMYK?34:e.t1===n.photometricInterpretations.YCbCr?36:e.t1===n.photometricInterpretations.CIELab?38:40;break;case 28:return k=(0,o.fromWhiteIsZero)(D,b),e.abrupt("break",41);case 30:return k=(0,o.fromBlackIsZero)(D,b),e.abrupt("break",41);case 32:return k=(0,o.fromPalette)(D,v.ColorMap),e.abrupt("break",41);case 34:return k=(0,o.fromCMYK)(D),e.abrupt("break",41);case 36:return k=(0,o.fromYCbCr)(D),e.abrupt("break",41);case 38:return k=(0,o.fromCIELab)(D),e.abrupt("break",41);case 40:throw new Error("Unsupported photometric interpretation.");case 41:return k.width=D.width,k.height=D.height,e.abrupt("return",k);case 44:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getTiePoints",value:function(){if(!this.fileDirectory.ModelTiepoint)return[];for(var e=[],t=0;t<this.fileDirectory.ModelTiepoint.length;t+=6)e.push({i:this.fileDirectory.ModelTiepoint[t],j:this.fileDirectory.ModelTiepoint[t+1],k:this.fileDirectory.ModelTiepoint[t+2],x:this.fileDirectory.ModelTiepoint[t+3],y:this.fileDirectory.ModelTiepoint[t+4],z:this.fileDirectory.ModelTiepoint[t+5]});return e}},{key:"getGDALMetadata",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return null}},{key:"getGDALNoData",value:function(){if(!this.fileDirectory.GDAL_NODATA)return null;var e=this.fileDirectory.GDAL_NODATA;return Number(e.substring(0,e.length-1))}},{key:"getOrigin",value:function(){var e=this.fileDirectory.ModelTiepoint,t=this.fileDirectory.ModelTransformation;if(e&&6===e.length)return[e[3],e[4],e[5]];if(t)return[t[3],t[7],t[11]];throw new Error("The image does not have an affine transformation.")}},{key:"getResolution",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=this.fileDirectory.ModelPixelScale,i=this.fileDirectory.ModelTransformation;if(r)return[r[0],-r[1],r[2]];if(i)return[i[0],i[5],i[10]];if(t){var a=t.getResolution(),n=(0,e.default)(a,3),o=n[0],s=n[1],l=n[2];return[o*t.getWidth()/this.getWidth(),s*t.getHeight()/this.getHeight(),l*t.getWidth()/this.getWidth()]}throw new Error("The image does not have an affine transformation.")}},{key:"pixelIsArea",value:function(){return 1===this.geoKeys.GTRasterTypeGeoKey}},{key:"getBoundingBox",value:function(){var e=this.getOrigin(),t=this.getResolution(),r=e[0],i=e[1],a=r+t[0]*this.getWidth(),n=i+t[1]*this.getHeight();return[Math.min(r,a),Math.min(i,n),Math.max(r,a),Math.max(i,n)]}}]),h}(),f=p;exports.default=f;
},{"@babel/runtime/helpers/slicedToArray":"HETk","@babel/runtime/regenerator":"PMvg","@babel/runtime/helpers/asyncToGenerator":"agGE","@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW","./globals":"j27V","./rgb":"fpBl","./compression":"FGCZ","./resample":"OQju"}],"dqpX":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var e=i(require("@babel/runtime/helpers/classCallCheck")),t=i(require("@babel/runtime/helpers/createClass"));function i(e){return e&&e.__esModule?e:{default:e}}var n=function(){function i(t){(0,e.default)(this,i),this._dataView=new DataView(t)}return(0,t.default)(i,[{key:"getUint64",value:function(e,t){var i,n=this.getUint32(e,t),a=this.getUint32(e+4,t);if(t){if(i=n+Math.pow(2,32)*a,!Number.isSafeInteger(i))throw new Error("".concat(i," exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues"));return i}if(i=Math.pow(2,32)*n+a,!Number.isSafeInteger(i))throw new Error("".concat(i," exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues"));return i}},{key:"getInt64",value:function(e,t){for(var i=0,n=(128&this._dataView.getUint8(e+(t?7:0)))>0,a=!0,r=0;r<8;r++){var u=this._dataView.getUint8(e+(t?r:7-r));n&&(a?0!==u&&(u=255&~(u-1),a=!1):u=255&~u),i+=u*Math.pow(256,r)}return n&&(i=-i),i}},{key:"getUint8",value:function(e,t){return this._dataView.getUint8(e,t)}},{key:"getInt8",value:function(e,t){return this._dataView.getInt8(e,t)}},{key:"getUint16",value:function(e,t){return this._dataView.getUint16(e,t)}},{key:"getInt16",value:function(e,t){return this._dataView.getInt16(e,t)}},{key:"getUint32",value:function(e,t){return this._dataView.getUint32(e,t)}},{key:"getInt32",value:function(e,t){return this._dataView.getInt32(e,t)}},{key:"getFloat32",value:function(e,t){return this._dataView.getFloat32(e,t)}},{key:"getFloat64",value:function(e,t){return this._dataView.getFloat64(e,t)}},{key:"buffer",get:function(){return this._dataView.buffer}}]),i}();exports.default=n;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW"}],"dGLV":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var t=i(require("@babel/runtime/helpers/classCallCheck")),e=i(require("@babel/runtime/helpers/createClass"));function i(t){return t&&t.__esModule?t:{default:t}}var n=function(){function i(e,n,s,a){(0,t.default)(this,i),this._dataView=new DataView(e),this._sliceOffset=n,this._littleEndian=s,this._bigTiff=a}return(0,e.default)(i,[{key:"covers",value:function(t,e){return this.sliceOffset<=t&&this.sliceTop>=t+e}},{key:"readUint8",value:function(t){return this._dataView.getUint8(t-this._sliceOffset,this._littleEndian)}},{key:"readInt8",value:function(t){return this._dataView.getInt8(t-this._sliceOffset,this._littleEndian)}},{key:"readUint16",value:function(t){return this._dataView.getUint16(t-this._sliceOffset,this._littleEndian)}},{key:"readInt16",value:function(t){return this._dataView.getInt16(t-this._sliceOffset,this._littleEndian)}},{key:"readUint32",value:function(t){return this._dataView.getUint32(t-this._sliceOffset,this._littleEndian)}},{key:"readInt32",value:function(t){return this._dataView.getInt32(t-this._sliceOffset,this._littleEndian)}},{key:"readFloat32",value:function(t){return this._dataView.getFloat32(t-this._sliceOffset,this._littleEndian)}},{key:"readFloat64",value:function(t){return this._dataView.getFloat64(t-this._sliceOffset,this._littleEndian)}},{key:"readUint64",value:function(t){var e,i=this.readUint32(t),n=this.readUint32(t+4);if(this._littleEndian){if(e=i+Math.pow(2,32)*n,!Number.isSafeInteger(e))throw new Error("".concat(e," exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues"));return e}if(e=Math.pow(2,32)*i+n,!Number.isSafeInteger(e))throw new Error("".concat(e," exceeds MAX_SAFE_INTEGER. Precision may be lost. Please report if you get this message to https://github.com/geotiffjs/geotiff.js/issues"));return e}},{key:"readInt64",value:function(t){for(var e=0,i=(128&this._dataView.getUint8(t+(this._littleEndian?7:0)))>0,n=!0,s=0;s<8;s++){var a=this._dataView.getUint8(t+(this._littleEndian?s:7-s));i&&(n?0!==a&&(a=255&~(a-1),n=!1):a=255&~a),e+=a*Math.pow(256,s)}return i&&(e=-e),e}},{key:"readOffset",value:function(t){return this._bigTiff?this.readUint64(t):this.readUint32(t)}},{key:"sliceOffset",get:function(){return this._sliceOffset}},{key:"sliceTop",get:function(){return this._sliceOffset+this.buffer.byteLength}},{key:"littleEndian",get:function(){return this._littleEndian}},{key:"bigTiff",get:function(){return this._bigTiff}},{key:"buffer",get:function(){return this._dataView.buffer}}]),i}();exports.default=n;
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW"}],"YJYN":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeBufferSource=u;var e=t(require("@babel/runtime/regenerator")),r=t(require("@babel/runtime/helpers/asyncToGenerator"));function t(e){return e&&e.__esModule?e:{default:e}}function u(t){return{fetch:function(u,n){return(0,r.default)(e.default.mark(function r(){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.slice(u,u+n));case 1:case"end":return e.stop()}},r)}))()}}}
},{"@babel/runtime/regenerator":"PMvg","@babel/runtime/helpers/asyncToGenerator":"agGE"}],"FOZT":[function(require,module,exports) {
"use strict";function r(r,t){for(var n in t)t.hasOwnProperty(n)&&(r[n]=t[n])}function t(r,t){for(var n=[],e=r.length,o=0;o<e;o+=t){for(var s=[],u=o;u<o+t;u++)s.push(r[u]);n.push(s)}return n}function n(r,t){return!(r.length<t.length)&&r.substr(r.length-t.length)===t}function e(r,t){for(var n=r.length,e=0;e<n;e++)t(r[e],e)}function o(r){var t={};for(var n in r){if(r.hasOwnProperty(n))t[r[n]]=n}return t}function s(r){for(var t=[],n=0;n<r;n++)t.push(n);return t}function u(r,t){for(var n=[],e=0;e<r;e++)n.push(t(e));return n}function f(r){for(var t=[],n=r.length,e=0;e<n;e++)t.push(r[e]);return t}function i(r){return r.length?f(r).map(i):r}Object.defineProperty(exports,"__esModule",{value:!0}),exports.assign=r,exports.chunk=t,exports.endsWith=n,exports.forEach=e,exports.invert=o,exports.range=s,exports.times=u,exports.toArray=f,exports.toArrayRecursively=i;
},{}],"BGyE":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.writeGeotiff=g;var e=require("./globals"),t=require("./utils");function r(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=n(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,o=function(){};return{s:o,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,u=!0,f=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return u=e.done,e},e:function(e){f=!0,a=e},f:function(){try{u||null==r.return||r.return()}finally{if(f)throw a}}}}function n(e,t){if(e){if("string"==typeof e)return i(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(e,t):void 0}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var o=(0,t.invert)(e.fieldTagNames),a=(0,t.invert)(e.geoKeyNames),u={};(0,t.assign)(u,o),(0,t.assign)(u,a);var f=(0,t.invert)(e.fieldTypeNames),l=1e3,c={nextZero:function(e,t){for(var r=t;0!==e[r];)r++;return r},readUshort:function(e,t){return e[t]<<8|e[t+1]},readShort:function(e,t){var r=c.ui8;return r[0]=e[t+1],r[1]=e[t+0],c.i16[0]},readInt:function(e,t){var r=c.ui8;return r[0]=e[t+3],r[1]=e[t+2],r[2]=e[t+1],r[3]=e[t+0],c.i32[0]},readUint:function(e,t){var r=c.ui8;return r[0]=e[t+3],r[1]=e[t+2],r[2]=e[t+1],r[3]=e[t+0],c.ui32[0]},readASCII:function(e,t,r){return r.map(function(r){return String.fromCharCode(e[t+r])}).join("")},readFloat:function(e,r){var n=c.ui8;return(0,t.times)(4,function(t){n[t]=e[r+3-t]}),c.fl32[0]},readDouble:function(e,r){var n=c.ui8;return(0,t.times)(8,function(t){n[t]=e[r+7-t]}),c.fl64[0]},writeUshort:function(e,t,r){e[t]=r>>8&255,e[t+1]=255&r},writeUint:function(e,t,r){e[t]=r>>24&255,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=r>>0&255},writeASCII:function(e,r,n){(0,t.times)(n.length,function(t){e[r+t]=n.charCodeAt(t)})},ui8:new Uint8Array(8)};c.fl64=new Float64Array(c.ui8.buffer),c.writeDouble=function(e,r,n){c.fl64[0]=n,(0,t.times)(8,function(t){e[r+t]=c.ui8[7-t]})};var s=function(n,i,o,a){var u=o,l=Object.keys(a).filter(function(e){return null!=e&&"undefined"!==e});n.writeUshort(i,u,l.length);var c,s=(u+=2)+12*l.length+4,h=r(l);try{var y=function(){var r=c.value,o=null;"number"==typeof r?o=r:"string"==typeof r&&(o=parseInt(r,10));var l=e.fieldTagTypes[o],h=f[l];if(null==l||void 0===l||void 0===l)throw new Error("unknown type of tag: ".concat(o));var y=a[r];if(void 0===y)throw new Error("failed to get value for key ".concat(r));"ASCII"===l&&"string"==typeof y&&!1===(0,t.endsWith)(y,"\0")&&(y+="\0");var m=y.length;n.writeUshort(i,u,o),u+=2,n.writeUshort(i,u,h),u+=2,n.writeUint(i,u,m);var p=[-1,1,1,2,4,8,0,0,0,0,0,0,8][h]*m,d=u+=4;p>4&&(n.writeUint(i,u,s),d=s),"ASCII"===l?n.writeASCII(i,d,y):"SHORT"===l?(0,t.times)(m,function(e){n.writeUshort(i,d+2*e,y[e])}):"LONG"===l?(0,t.times)(m,function(e){n.writeUint(i,d+4*e,y[e])}):"RATIONAL"===l?(0,t.times)(m,function(e){n.writeUint(i,d+8*e,Math.round(1e4*y[e])),n.writeUint(i,d+8*e+4,1e4)}):"DOUBLE"===l&&(0,t.times)(m,function(e){n.writeDouble(i,d+8*e,y[e])}),p>4&&(s+=p+=1&p),u+=4};for(h.s();!(c=h.n()).done;)y()}catch(m){h.e(m)}finally{h.f()}return[u,s]},h=function(e){var t=new Uint8Array(l),r=4,n=c;t[0]=77,t[1]=77,t[3]=42;var i=8;if(n.writeUint(t,r,i),r+=4,e.forEach(function(r,o){var a=s(n,t,i,r);i=a[1],o<e.length-1&&n.writeUint(t,a[0],i)}),t.slice)return t.slice(0,i).buffer;for(var o=new Uint8Array(i),a=0;a<i;a++)o[a]=t[a];return o.buffer},y=function(e,r,n,i){if(null==n)throw new Error("you passed into encodeImage a width of type ".concat(n));if(null==r)throw new Error("you passed into encodeImage a width of type ".concat(r));var o={256:[r],257:[n],273:[l],278:[n],305:"geotiff.js"};if(i)for(var a in i)i.hasOwnProperty(a)&&(o[a]=i[a]);var u=new Uint8Array(h([o])),f=new Uint8Array(e),c=o[277],s=new Uint8Array(l+r*n*c);return(0,t.times)(u.length,function(e){s[e]=u[e]}),(0,t.forEach)(f,function(e,t){s[l+t]=e}),s.buffer},m=function(e){var t={};for(var r in e)"StripOffsets"!==r&&(u[r]||console.error(r,"not in name2code:",Object.keys(u)),t[u[r]]=e[r]);return t},p=function(e){return Array.isArray(e)?e:[e]},d=[["Compression",1],["PlanarConfiguration",1],["XPosition",0],["YPosition",0],["ResolutionUnit",1],["ExtraSamples",0],["GeoAsciiParams","WGS 84\0"],["ModelTiepoint",[0,0,0,-180,90,0]],["GTModelTypeGeoKey",2],["GTRasterTypeGeoKey",1],["GeographicTypeGeoKey",4326],["GeogCitationGeoKey","WGS 84"]];function g(r,n){var i,o,a,f;"number"==typeof r[0]?(i=n.height||n.ImageLength,a=n.width||n.ImageWidth,o=r.length/(i*a),f=r):(o=r.length,i=r[0].length,a=r[0][0].length,f=[],(0,t.times)(i,function(e){(0,t.times)(a,function(n){(0,t.times)(o,function(t){f.push(r[t][e][n])})})})),n.ImageLength=i,delete n.height,n.ImageWidth=a,delete n.width,n.BitsPerSample||(n.BitsPerSample=(0,t.times)(o,function(){return 8})),d.forEach(function(e){var t=e[0];if(!n[t]){var r=e[1];n[t]=r}}),n.PhotometricInterpretation||(n.PhotometricInterpretation=3===n.BitsPerSample.length?2:1),n.SamplesPerPixel||(n.SamplesPerPixel=[o]),n.StripByteCounts||(n.StripByteCounts=[o*i*a]),n.ModelPixelScale||(n.ModelPixelScale=[360/a,180/i,0]),n.SampleFormat||(n.SampleFormat=(0,t.times)(o,function(){return 1}));var l=Object.keys(n).filter(function(e){return(0,t.endsWith)(e,"GeoKey")}).sort(function(e,t){return u[e]-u[t]});if(!n.GeoKeyDirectory){var c=[1,1,0,l.length];l.forEach(function(t){var r,i,o,a=Number(u[t]);c.push(a),"SHORT"===e.fieldTagTypes[a]?(r=1,i=0,o=n[t]):"GeogCitationGeoKey"===t?(r=n.GeoAsciiParams.length,i=Number(u.GeoAsciiParams),o=0):console.log("[geotiff.js] couldn't get TIFFTagLocation for ".concat(t)),c.push(i),c.push(r),c.push(o)}),n.GeoKeyDirectory=c}for(var s in l)l.hasOwnProperty(s)&&delete n[s];["Compression","ExtraSamples","GeographicTypeGeoKey","GTModelTypeGeoKey","GTRasterTypeGeoKey","ImageLength","ImageWidth","PhotometricInterpretation","PlanarConfiguration","ResolutionUnit","SamplesPerPixel","XPosition","YPosition"].forEach(function(e){n[e]&&(n[e]=p(n[e]))});var h=m(n);return y(f,a,i,h)}
},{"./globals":"j27V","./utils":"FOZT"}],"dy4f":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.setLogger=o,exports.log=a,exports.info=i,exports.warn=l,exports.error=f,exports.time=p,exports.timeEnd=c;var e=n(require("@babel/runtime/helpers/classCallCheck")),r=n(require("@babel/runtime/helpers/createClass"));function n(e){return e&&e.__esModule?e:{default:e}}var t=function(){function n(){(0,e.default)(this,n)}return(0,r.default)(n,[{key:"log",value:function(){}},{key:"info",value:function(){}},{key:"warn",value:function(){}},{key:"error",value:function(){}},{key:"time",value:function(){}},{key:"timeEnd",value:function(){}}]),n}(),u=new t;function o(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new t;u=e}function a(){var e;return(e=u).log.apply(e,arguments)}function i(){var e;return(e=u).info.apply(e,arguments)}function l(){var e;return(e=u).warn.apply(e,arguments)}function f(){var e;return(e=u).error.apply(e,arguments)}function p(){var e;return(e=u).time.apply(e,arguments)}function c(){var e;return(e=u).timeEnd.apply(e,arguments)}
},{"@babel/runtime/helpers/classCallCheck":"fcMS","@babel/runtime/helpers/createClass":"P8NW"}],"bsJs":[function(require,module,exports) {
"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.fromArrayBuffer=U,exports.writeArrayBuffer=L,Object.defineProperty(exports,"getDecoder",{enumerable:!0,get:function(){return g.getDecoder}}),Object.defineProperty(exports,"setLogger",{enumerable:!0,get:function(){return v.setLogger}}),exports.rgb=exports.globals=exports.MultiGeoTIFF=exports.default=exports.GeoTIFF=void 0;var e=k(require("@babel/runtime/regenerator")),t=k(require("@babel/runtime/helpers/defineProperty")),r=k(require("@babel/runtime/helpers/slicedToArray")),n=k(require("@babel/runtime/helpers/asyncToGenerator")),a=k(require("@babel/runtime/helpers/createClass")),i=k(require("@babel/runtime/helpers/inherits")),s=k(require("@babel/runtime/helpers/possibleConstructorReturn")),u=k(require("@babel/runtime/helpers/getPrototypeOf")),f=k(require("@babel/runtime/helpers/wrapNativeSuper")),c=k(require("@babel/runtime/helpers/classCallCheck")),o=k(require("./geotiffimage")),l=k(require("./dataview64")),d=k(require("./dataslice")),p=require("./source-rn"),h=w(require("./globals"));exports.globals=h;var b=require("./geotiffwriter"),y=w(require("./rgb"));exports.rgb=y;var g=require("./compression"),v=require("./logging");function x(){if("function"!=typeof WeakMap)return null;var e=new WeakMap;return x=function(){return e},e}function w(e){if(e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var t=x();if(t&&t.has(e))return t.get(e);var r={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)){var i=n?Object.getOwnPropertyDescriptor(e,a):null;i&&(i.get||i.set)?Object.defineProperty(r,a,i):r[a]=e[a]}return r.default=e,t&&t.set(e,r),r}function k(e){return e&&e.__esModule?e:{default:e}}function T(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function m(e){for(var r=1;r<arguments.length;r++){var n=null!=arguments[r]?arguments[r]:{};r%2?T(Object(n),!0).forEach(function(r){(0,t.default)(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function I(e){var t=O();return function(){var r,n=(0,u.default)(e);if(t){var a=(0,u.default)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return(0,s.default)(this,r)}}function O(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}function F(e){switch(e){case h.fieldTypes.BYTE:case h.fieldTypes.ASCII:case h.fieldTypes.SBYTE:case h.fieldTypes.UNDEFINED:return 1;case h.fieldTypes.SHORT:case h.fieldTypes.SSHORT:return 2;case h.fieldTypes.LONG:case h.fieldTypes.SLONG:case h.fieldTypes.FLOAT:case h.fieldTypes.IFD:return 4;case h.fieldTypes.RATIONAL:case h.fieldTypes.SRATIONAL:case h.fieldTypes.DOUBLE:case h.fieldTypes.LONG8:case h.fieldTypes.SLONG8:case h.fieldTypes.IFD8:return 8;default:throw new RangeError("Invalid field type: ".concat(e))}}function D(e){var t=e.GeoKeyDirectory;if(!t)return null;for(var r={},n=4;n<=4*t[3];n+=4){var a=h.geoKeyNames[t[n]],i=t[n+1]?h.fieldTagNames[t[n+1]]:null,s=t[n+2],u=t[n+3],f=null;if(i){if(null==(f=e[i]))throw new Error("Could not get value of geoKey '".concat(a,"'."));"string"==typeof f?f=f.substring(u,u+s-1):f.subarray&&(f=f.subarray(u,u+s),1===s&&(f=f[0]))}else f=u;r[a]=f}return r}function A(e,t,r,n){var a=null,i=null,s=F(t);switch(t){case h.fieldTypes.BYTE:case h.fieldTypes.ASCII:case h.fieldTypes.UNDEFINED:a=new Uint8Array(r),i=e.readUint8;break;case h.fieldTypes.SBYTE:a=new Int8Array(r),i=e.readInt8;break;case h.fieldTypes.SHORT:a=new Uint16Array(r),i=e.readUint16;break;case h.fieldTypes.SSHORT:a=new Int16Array(r),i=e.readInt16;break;case h.fieldTypes.LONG:case h.fieldTypes.IFD:a=new Uint32Array(r),i=e.readUint32;break;case h.fieldTypes.SLONG:a=new Int32Array(r),i=e.readInt32;break;case h.fieldTypes.LONG8:case h.fieldTypes.IFD8:a=new Array(r),i=e.readUint64;break;case h.fieldTypes.SLONG8:a=new Array(r),i=e.readInt64;break;case h.fieldTypes.RATIONAL:a=new Uint32Array(2*r),i=e.readUint32;break;case h.fieldTypes.SRATIONAL:a=new Int32Array(2*r),i=e.readInt32;break;case h.fieldTypes.FLOAT:a=new Float32Array(r),i=e.readFloat32;break;case h.fieldTypes.DOUBLE:a=new Float64Array(r),i=e.readFloat64;break;default:throw new RangeError("Invalid field type: ".concat(t))}if(t!==h.fieldTypes.RATIONAL&&t!==h.fieldTypes.SRATIONAL)for(var u=0;u<r;++u)a[u]=i.call(e,n+u*s);else for(var f=0;f<r;f+=2)a[f]=i.call(e,n+f*s),a[f+1]=i.call(e,n+(f*s+4));return t===h.fieldTypes.ASCII?new TextDecoder("utf-8").decode(a):a}var S=function e(t,r,n){(0,c.default)(this,e),this.fileDirectory=t,this.geoKeyDirectory=r,this.nextIFDByteOffset=n},R=function(e){(0,i.default)(r,e);var t=I(r);function r(e){var n;return(0,c.default)(this,r),(n=t.call(this,"No image at index ".concat(e))).index=e,n}return r}((0,f.default)(Error)),q=function(){function t(){(0,c.default)(this,t)}return(0,a.default)(t,[{key:"readRasters",value:function(){var t=(0,n.default)(e.default.mark(function t(){var n,a,i,s,u,f,c,o,l,d,p,h,b,y,g,v,x,w,k,T,I,O,F,D,A,S,R,q,E,P,N,U,C,L,j,B,G,M,V,_=arguments;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=_.length>0&&void 0!==_[0]?_[0]:{},a=n.window,i=n.width,s=n.height,u=n.resX,f=n.resY,c=n.bbox,e.next=5,this.getImage();case 5:return o=e.sent,l=o,e.next=9,this.getImageCount();case 9:if(d=e.sent,p=o.getBoundingBox(),!a||!c){e.next=13;break}throw new Error('Both "bbox" and "window" passed.');case 13:if(!i&&!s){e.next=24;break}if(a&&(h=o.getOrigin(),b=(0,r.default)(h,2),y=b[0],g=b[1],v=o.getResolution(),x=(0,r.default)(v,2),w=x[0],k=x[1],c=[y+a[0]*w,g+a[1]*k,y+a[2]*w,g+a[3]*k]),T=c||p,!i){e.next=20;break}if(!u){e.next=19;break}throw new Error("Both width and resX passed");case 19:u=(T[2]-T[0])/i;case 20:if(!s){e.next=24;break}if(!f){e.next=23;break}throw new Error("Both width and resY passed");case 23:f=(T[3]-T[1])/s;case 24:if(!u&&!f){e.next=48;break}I=[],O=0;case 27:if(!(O<d)){e.next=36;break}return e.next=30,this.getImage(O);case 30:F=e.sent,D=F.fileDirectory,A=D.SubfileType,S=D.NewSubfileType,(0===O||2===A||1&S)&&I.push(F);case 33:++O,e.next=27;break;case 36:I.sort(function(e,t){return e.getWidth()-t.getWidth()}),R=0;case 38:if(!(R<I.length)){e.next=48;break}if(q=I[R],E=(p[2]-p[0])/q.getWidth(),P=(p[3]-p[1])/q.getHeight(),l=q,!(u&&u>E||f&&f>P)){e.next=45;break}return e.abrupt("break",48);case 45:++R,e.next=38;break;case 48:return N=a,c&&(U=o.getOrigin(),C=(0,r.default)(U,2),L=C[0],j=C[1],B=l.getResolution(o),G=(0,r.default)(B,2),M=G[0],V=G[1],N=[Math.round((c[0]-L)/M),Math.round((c[1]-j)/V),Math.round((c[2]-L)/M),Math.round((c[3]-j)/V)],N=[Math.min(N[0],N[2]),Math.min(N[1],N[3]),Math.max(N[0],N[2]),Math.max(N[1],N[3])]),e.abrupt("return",l.readRasters(m(m({},n),{},{window:N})));case 51:case"end":return e.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),t}(),E=function(t){(0,i.default)(u,t);var s=I(u);function u(e,t,r,n){var a,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return(0,c.default)(this,u),(a=s.call(this)).source=e,a.littleEndian=t,a.bigTiff=r,a.firstIFDOffset=n,a.cache=i.cache||!1,a.ifdRequests=[],a.ghostValues=null,a}return(0,a.default)(u,[{key:"getSlice",value:function(){var t=(0,n.default)(e.default.mark(function t(r,n){var a;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=this.bigTiff?4048:1024,e.t0=d.default,e.next=4,this.source.fetch(r,void 0!==n?n:a);case 4:return e.t1=e.sent,e.t2=r,e.t3=this.littleEndian,e.t4=this.bigTiff,e.abrupt("return",new e.t0(e.t1,e.t2,e.t3,e.t4));case 9:case"end":return e.stop()}},t,this)}));return function(e,r){return t.apply(this,arguments)}}()},{key:"parseFileDirectoryAt",value:function(){var t=(0,n.default)(e.default.mark(function t(r){var n,a,i,s,u,f,c,o,l,d,p,b,y,g,v,x,w,k,T,m;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.bigTiff?20:12,a=this.bigTiff?8:2,e.next=4,this.getSlice(r);case 4:if(i=e.sent,s=this.bigTiff?i.readUint64(r):i.readUint16(r),u=s*n+(this.bigTiff?16:6),i.covers(r,u)){e.next=11;break}return e.next=10,this.getSlice(r,u);case 10:i=e.sent;case 11:f={},c=r+(this.bigTiff?8:2),o=0;case 14:if(!(o<s)){e.next=41;break}if(l=i.readUint16(c),d=i.readUint16(c+2),p=this.bigTiff?i.readUint64(c+4):i.readUint32(c+4),b=void 0,y=void 0,g=F(d),v=c+(this.bigTiff?12:8),!(g*p<=(this.bigTiff?8:4))){e.next=26;break}b=A(i,d,p,v),e.next=36;break;case 26:if(x=i.readOffset(v),w=F(d)*p,!i.covers(x,w)){e.next=32;break}b=A(i,d,p,x),e.next=36;break;case 32:return e.next=34,this.getSlice(x,w);case 34:k=e.sent,b=A(k,d,p,x);case 36:y=1===p&&-1===h.arrayFields.indexOf(l)&&d!==h.fieldTypes.RATIONAL&&d!==h.fieldTypes.SRATIONAL?b[0]:b,f[h.fieldTagNames[l]]=y;case 38:c+=n,++o,e.next=14;break;case 41:return T=D(f),m=i.readOffset(r+a+n*s),e.abrupt("return",new S(f,T,m));case 44:case"end":return e.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()},{key:"requestIFD",value:function(){var t=(0,n.default)(e.default.mark(function t(r){var a=this;return e.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.ifdRequests[r]){t.next=4;break}return t.abrupt("return",this.ifdRequests[r]);case 4:if(0!==r){t.next=9;break}return this.ifdRequests[r]=this.parseFileDirectoryAt(this.firstIFDOffset),t.abrupt("return",this.ifdRequests[r]);case 9:if(this.ifdRequests[r-1]){t.next=19;break}t.prev=10,this.ifdRequests[r-1]=this.requestIFD(r-1),t.next=19;break;case 14:if(t.prev=14,t.t0=t.catch(10),!(t.t0 instanceof R)){t.next=18;break}throw new R(r);case 18:throw t.t0;case 19:return this.ifdRequests[r]=(0,n.default)(e.default.mark(function t(){var n;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.ifdRequests[r-1];case 2:if(0!==(n=e.sent).nextIFDByteOffset){e.next=5;break}throw new R(r);case 5:return e.abrupt("return",a.parseFileDirectoryAt(n.nextIFDByteOffset));case 6:case"end":return e.stop()}},t)}))(),t.abrupt("return",this.ifdRequests[r]);case 21:case"end":return t.stop()}},t,this,[[10,14]])}));return function(e){return t.apply(this,arguments)}}()},{key:"getImage",value:function(){var t=(0,n.default)(e.default.mark(function t(){var r,n,a=arguments;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>0&&void 0!==a[0]?a[0]:0,e.next=3,this.requestIFD(r);case 3:return n=e.sent,e.abrupt("return",new o.default(n.fileDirectory,n.geoKeyDirectory,this.dataView,this.littleEndian,this.cache,this.source));case 5:case"end":return e.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getImageCount",value:function(){var t=(0,n.default)(e.default.mark(function t(){var r,n;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=0,n=!0;case 2:if(!n){e.next=18;break}return e.prev=3,e.next=6,this.requestIFD(r);case 6:++r,e.next=16;break;case 9:if(e.prev=9,e.t0=e.catch(3),!(e.t0 instanceof R)){e.next=15;break}n=!1,e.next=16;break;case 15:throw e.t0;case 16:e.next=2;break;case 18:return e.abrupt("return",r);case 19:case"end":return e.stop()}},t,this,[[3,9]])}));return function(){return t.apply(this,arguments)}}()},{key:"getGhostValues",value:function(){var t=(0,n.default)(e.default.mark(function t(){var n,a,i,s,u,f,c,o,l=this;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.bigTiff?16:8,!this.ghostValues){e.next=3;break}return e.abrupt("return",this.ghostValues);case 3:return i=(a="GDAL_STRUCTURAL_METADATA_SIZE=").length+100,e.next=7,this.getSlice(n,i);case 7:if(s=e.sent,a!==A(s,h.fieldTypes.ASCII,a.length,n)){e.next=19;break}if(u=A(s,h.fieldTypes.ASCII,i,n),f=u.split("\n")[0],!((c=Number(f.split("=")[1].split(" ")[0])+f.length)>i)){e.next=16;break}return e.next=15,this.getSlice(n,c);case 15:s=e.sent;case 16:o=A(s,h.fieldTypes.ASCII,c,n),this.ghostValues={},o.split("\n").filter(function(e){return e.length>0}).map(function(e){return e.split("=")}).forEach(function(e){var t=(0,r.default)(e,2),n=t[0],a=t[1];l.ghostValues[n]=a});case 19:return e.abrupt("return",this.ghostValues);case 20:case"end":return e.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"close",value:function(){return"function"==typeof this.source.close&&this.source.close()}}],[{key:"fromSource",value:function(){var t=(0,n.default)(e.default.mark(function t(r,n){var a,i,s,f,c,o,d;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.fetch(0,1024);case 2:if(a=e.sent,i=new l.default(a),18761!==(s=i.getUint16(0,0))){e.next=9;break}f=!0,e.next=14;break;case 9:if(19789!==s){e.next=13;break}f=!1,e.next=14;break;case 13:throw new TypeError("Invalid byte order value.");case 14:if(42!==(c=i.getUint16(2,f))){e.next=19;break}o=!1,e.next=27;break;case 19:if(43!==c){e.next=26;break}if(o=!0,8===i.getUint16(4,f)){e.next=24;break}throw new Error("Unsupported offset byte-size.");case 24:e.next=27;break;case 26:throw new TypeError("Invalid magic number.");case 27:return d=o?i.getUint64(8,f):i.getUint32(4,f),e.abrupt("return",new u(r,f,o,d,n));case 29:case"end":return e.stop()}},t)}));return function(e,r){return t.apply(this,arguments)}}()}]),u}(q);exports.GeoTIFF=E;var P=E;exports.default=P;var N=function(t){(0,i.default)(s,t);var r=I(s);function s(e,t){var n;return(0,c.default)(this,s),(n=r.call(this)).mainFile=e,n.overviewFiles=t,n.imageFiles=[e].concat(t),n.fileDirectoriesPerFile=null,n.fileDirectoriesPerFileParsing=null,n.imageCount=null,n}return(0,a.default)(s,[{key:"parseFileDirectoriesPerFile",value:function(){var t=(0,n.default)(e.default.mark(function t(){var r;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=[this.mainFile.parseFileDirectoryAt(this.mainFile.firstIFDOffset)].concat(this.overviewFiles.map(function(e){return e.parseFileDirectoryAt(e.firstIFDOffset)})),e.next=3,Promise.all(r);case 3:return this.fileDirectoriesPerFile=e.sent,e.abrupt("return",this.fileDirectoriesPerFile);case 5:case"end":return e.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getImage",value:function(){var t=(0,n.default)(e.default.mark(function t(){var r,n,a,i,s,u,f,c=arguments;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=c.length>0&&void 0!==c[0]?c[0]:0,e.next=3,this.getImageCount();case 3:return e.next=5,this.parseFileDirectoriesPerFile();case 5:n=0,a=0,i=0;case 8:if(!(i<this.imageFiles.length)){e.next=26;break}s=this.imageFiles[i],u=0;case 11:if(!(u<this.imageCounts[i])){e.next=22;break}if(r!==n){e.next=17;break}return e.next=15,s.requestIFD(a);case 15:return f=e.sent,e.abrupt("return",new o.default(f.fileDirectory,s.geoKeyDirectory,s.dataView,s.littleEndian,s.cache,s.source));case 17:n++,a++;case 19:u++,e.next=11;break;case 22:a=0;case 23:i++,e.next=8;break;case 26:throw new RangeError("Invalid image index");case 27:case"end":return e.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()},{key:"getImageCount",value:function(){var t=(0,n.default)(e.default.mark(function t(){var r;return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===this.imageCount){e.next=2;break}return e.abrupt("return",this.imageCount);case 2:return r=[this.mainFile.getImageCount()].concat(this.overviewFiles.map(function(e){return e.getImageCount()})),e.next=5,Promise.all(r);case 5:return this.imageCounts=e.sent,this.imageCount=this.imageCounts.reduce(function(e,t){return e+t},0),e.abrupt("return",this.imageCount);case 8:case"end":return e.stop()}},t,this)}));return function(){return t.apply(this,arguments)}}()}]),s}(q);function U(e){return C.apply(this,arguments)}function C(){return(C=(0,n.default)(e.default.mark(function t(r){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",E.fromSource((0,p.makeBufferSource)(r)));case 1:case"end":return e.stop()}},t)}))).apply(this,arguments)}function L(e,t){return j.apply(this,arguments)}function j(){return(j=(0,n.default)(e.default.mark(function t(r,n){return e.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",(0,b.writeGeotiff)(r,n));case 1:case"end":return e.stop()}},t)}))).apply(this,arguments)}exports.MultiGeoTIFF=N;
},{"@babel/runtime/regenerator":"PMvg","@babel/runtime/helpers/defineProperty":"IxO8","@babel/runtime/helpers/slicedToArray":"HETk","@babel/runtime/helpers/asyncToGenerator":"agGE","@babel/runtime/helpers/createClass":"P8NW","@babel/runtime/helpers/inherits":"d4H2","@babel/runtime/helpers/possibleConstructorReturn":"pxk2","@babel/runtime/helpers/getPrototypeOf":"UJE0","@babel/runtime/helpers/wrapNativeSuper":"ozpi","@babel/runtime/helpers/classCallCheck":"fcMS","./geotiffimage":"eOWo","./dataview64":"dqpX","./dataslice":"dGLV","./source-rn":"YJYN","./globals":"j27V","./geotiffwriter":"BGyE","./rgb":"fpBl","./compression":"FGCZ","./logging":"dy4f"}]},{},["bsJs"], "GeoTIFF")
//# sourceMappingURL=geotiff.js.map